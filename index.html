<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <!-- שאר תוכן ה-head נשאר ללא שינוי -->
</head>
<body>
    <!-- תוכן ה-body נשאר ללא שינוי -->

    <script>
        // כל הקוד הקודם נשאר ללא שינוי עד לפונקציות הבאות:

        function updateDisplay() {
            wordElement.textContent = currentWord
                .split('')
                .map(letter => (guessedLetters.includes(letter) || letter === ' ' ? letter : '_'))
                .join(' ');
            hintElement.textContent = `רמז: ${currentHint}`;
            guessesElement.textContent = `ניחושים נותרים: ${Math.max(0, remainingGuesses)}`;
        }

        function guessLetter(letter) {
            if (!guessedLetters.includes(letter) && remainingGuesses > 0) {
                guessedLetters.push(letter);
                const button = Array.from(keyboardElement.children).find(btn => btn.textContent === letter);
                button.classList.add('guessed');
                if (!currentWord.includes(letter)) {
                    remainingGuesses--;
                    updateHangman();
                }
                updateDisplay();
                checkGameStatus();
            }
        }

        function checkGameStatus() {
            const normalizedCurrentWord = currentWord.replace(/[םןךףץ]/g, match => {
                return { 'ם': 'מ', 'ן': 'נ', 'ך': 'כ', 'ף': 'פ', 'ץ': 'צ' }[match];
            });
            const normalizedGuessedWord = wordElement.textContent.replace(/\s/g, '').replace(/[םןךףץ]/g, match => {
                return { 'ם': 'מ', 'ן': 'נ', 'ך': 'כ', 'ף': 'פ', 'ץ': 'צ' }[match];
            });

            if (normalizedCurrentWord === normalizedGuessedWord) {
                messageElement.textContent = 'כל הכבוד! ניצחת!';
                endGame(true);
            } else if (remainingGuesses <= 0) {
                messageElement.textContent = `המשחק הסתיים. לא הצלחת לנחש את השם: ${currentWord}`;
                endGame(false);
            }
        }

        function endGame(isWin) {
            disableKeyboard();
            newGameButton.style.display = 'inline-block';
            shareButton.style.display = 'inline-block';
            remainingGuesses = 0;
            updateDisplay();
        }

        // שאר הקוד נשאר ללא שינוי
    </script>
</body>
</html>